<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard com Carrossel Automático</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome (Ícones) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .card {
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .carousel-control-prev, .carousel-control-next {
            width: 5%;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 50%;
        }
        .carousel-indicators button {
            background-color: #333 !important;
        }
        .timer-container {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }
        .timer-progress {
            height: 5px;
            background-color: rgba(255, 255, 255, 0.3);
            width: 100px;
            border-radius: 5px;
            overflow: hidden;
        }
        .timer-progress-bar {
            height: 100%;
            background-color: #fff;
            width: 100%;
            border-radius: 5px;
            animation: progress 10s linear infinite;
        }
        @keyframes progress {
            0% { width: 100%; }
            100% { width: 0%; }
        }
    </style>
</head>
<body>
    <div class="container-fluid mt-3">
        <!-- Título e Filtros -->
        <div class="row mb-4">
            <div class="col-md-12">
                <h1><i class="fas fa-chart-line me-2"></i> Dashboard Interativo</h1>
                <div class="d-flex justify-content-end">
                    <select class="form-select w-25">
                        <option selected>Filtrar por Ano</option>
                        <option>2023</option>
                        <option>2022</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Carrossel de Gráficos (Agora com intervalo de 10 segundos) -->
        <div id="graficosCarrossel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="10000">
            <!-- Indicadores (pontos de navegação) -->
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#graficosCarrossel" data-bs-slide-to="0" class="active"></button>
                <button type="button" data-bs-target="#graficosCarrossel" data-bs-slide-to="1"></button>
                <button type="button" data-bs-target="#graficosCarrossel" data-bs-slide-to="2"></button>
            </div>

            <!-- Slides dos Gráficos -->
            <div class="carousel-inner">
                <!-- Gráfico 1: Barras -->
                <div class="carousel-item active">
                    <div class="card p-4">
                        <h4 class="text-center mb-4"><i class="fas fa-chart-bar me-2"></i>Vendas por Mês</h4>
                        <canvas id="barChart" height="300"></canvas>
                    </div>
                </div>

                <!-- Gráfico 2: Pizza -->
                <div class="carousel-item">
                    <div class="card p-4">
                        <h4 class="text-center mb-4"><i class="fas fa-chart-pie me-2"></i>Distribuição de Vendas</h4>
                        <canvas id="pieChart" height="300"></canvas>
                    </div>
                </div>

                <!-- Gráfico 3: Linha -->
                <div class="carousel-item">
                    <div class="card p-4">
                        <h4 class="text-center mb-4"><i class="fas fa-chart-line me-2"></i>Performance Anual</h4>
                        <canvas id="lineChart" height="300"></canvas>
                    </div>
                </div>
            </div>

            <!-- Botões de Navegação (setas) -->
            <button class="carousel-control-prev" type="button" data-bs-target="#graficosCarrossel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#graficosCarrossel" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
            </button>

            <!-- Contador Visual (10 segundos) -->
            <div class="timer-container">
                <div class="timer-progress">
                    <div class="timer-progress-bar"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS + Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Script dos Gráficos -->
    <script>
        // Gráfico de Barras (Slide 1)
        new Chart(
            document.getElementById('barChart'),
            {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'],
                    datasets: [{
                        label: 'Vendas 2023',
                        data: [12000, 19000, 15000, 18000, 21000, 25000],
                        backgroundColor: 'rgba(54, 162, 235, 0.7)'
                    }]
                },
                options: { responsive: true }
            }
        );

        // Gráfico de Pizza (Slide 2)
        new Chart(
            document.getElementById('pieChart'),
            {
                type: 'pie',
                data: {
                    labels: ['Eletrônicos', 'Roupas', 'Alimentos', 'Livros'],
                    datasets: [{
                        data: [30000, 15000, 12000, 8000],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(255, 205, 86, 0.7)',
                            'rgba(153, 102, 255, 0.7)'
                        ]
                    }]
                },
                options: { responsive: true }
            }
        );

        // Gráfico de Linha (Slide 3)
        new Chart(
            document.getElementById('lineChart'),
            {
                type: 'line',
                data: {
                    labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'],
                    datasets: [{
                        label: 'Vendas Reais',
                        data: [12000, 19000, 15000, 18000, 21000, 25000],
                        borderColor: 'rgba(54, 162, 235, 1)',
                        fill: false
                    }]
                },
                options: { responsive: true }
            }
        );

        // Reinicia a animação do contador a cada transição
        document.getElementById('graficosCarrossel').addEventListener('slid.bs.carousel', function () {
            const timerBar = document.querySelector('.timer-progress-bar');
            timerBar.style.animation = 'none';
            void timerBar.offsetWidth; // Força o reflow
            timerBar.style.animation = 'progress 10s linear infinite';
        });
    </script>
</body>
</html>